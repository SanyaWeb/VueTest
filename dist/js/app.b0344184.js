(function(t){function e(e){for(var a,r,c=e[0],o=e[1],u=e[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,c=1;c<n.length;c++){var o=n[c];0!==i[o]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},s=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1208:function(t,e,n){},3595:function(t,e,n){"use strict";var a=n("a282"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a,i,s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n(t.layout,{tag:"component"})],1)},c=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mainLayout"},[n("div",{staticClass:"header-place"}),n("header",{staticClass:"header"},[n("SidebarToggle",{on:{toggleSidebar:function(e){t.isOpen=!t.isOpen}},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}}),n("TopMenu")],1),n("div",{staticClass:"pageContent"},[n("div",{staticClass:"sidebarPlace",class:{sidebarPlace_hidden:!t.isOpen}}),n("Sidebar",{model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}}),n("div",{staticClass:"content"},[n(t.viewName,{tag:"component"})],1)],1),t._m(0)])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer"},[n("span",{staticClass:"copyrite"},[t._v("© Тестовое задание - часть 2")])])}],l=(n("7db0"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav"},t._l(t.items,(function(e){return n("span",{key:e.id,staticClass:"nav__item",class:{active:e.active},on:{click:function(n){return t.setActive(e)}}},[t._v(t._s(e.name))])})),0)}),d=[],p=(n("4160"),n("159b"),{computed:{items:function(){return this.$store.state.topMenu.items}},methods:{setActive:function(t){this.$store.dispatch("topMenuClick",{item:t})}},mounted:function(){var t=this;this.items.forEach((function(e){e.active&&t.$store.dispatch("setView",{viewId:e.viewId})}))}}),f=p,v=(n("a164"),n("2877")),m=Object(v["a"])(f,l,d,!1,null,null,null),_=m.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar",class:{sidebar_hidden:!t.value}},[n("div",{staticClass:"categories-list"},[n("CategoriesList")],1)])},C=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"categories-list"},t._l(t.items,(function(e){return n("span",{key:e.ident,staticClass:"categories-list__item",class:{active:e.active},on:{click:function(n){return t.setCategory(e.ident)}}},[t._v(t._s(e.name))])})),0)},b=[],y={computed:{items:function(){return this.$store.state.categories.items}},methods:{setCategory:function(t){this.$store.dispatch("setCategory",{ident:t})}}},O=y,E=(n("ac97"),Object(v["a"])(O,g,b,!1,null,null,null)),w=E.exports,T={props:["value"],components:{CategoriesList:w}},$=T,j=(n("884c"),Object(v["a"])($,h,C,!1,null,null,null)),I=j.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-inner"},[n("div",{staticClass:"sidebar-toggle",class:{sidebarToggle_close:t.value},on:{click:function(e){return t.$emit("toggleSidebar")}}},[n("span",{staticClass:"sidebar-toggle__inner"})])])},x=[],S={props:["value"]},L=S,M=(n("62de"),Object(v["a"])(L,P,x,!1,null,null,null)),N=M.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Вывод данных категории")]),t.requestUrl?n("div",{staticClass:"requestTo"},[n("span",[t._v("Request to:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requestUrl,expression:"requestUrl"}],staticClass:"requestTo__input",attrs:{type:"text",readonly:""},domProps:{value:t.requestUrl},on:{input:function(e){e.target.composing||(t.requestUrl=e.target.value)}}})]):t._e(),n(t.componentName,{tag:"component"})],1)},R=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fetchResult"},[n("span",{staticClass:"fetchResult__text"},[t._v("Result:")]),n("div",{staticClass:"json-text"},[n("pre",[t._v(t._s(t.fetchResult))])])])},A=[],V={computed:{fetchResult:function(){var t=this.$store.state.categories.fetchResult;console.log(t);var e=JSON.stringify(t,null,4);return e.length?e:"Пустой ответ"}}},q=V,D=(n("8ab6"),Object(v["a"])(q,k,A,!1,null,null,null)),G=D.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[t._v("Выберите категорию")])},J=[],Y={},z=Object(v["a"])(Y,W,J,!1,null,null,null),F=z.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Подождите...")])},H=[],K={},Q=Object(v["a"])(K,B,H,!1,null,null,null),X=Q.exports,Z={computed:{requestUrl:function(){return!!this.$store.state.categories.activeItem.ident.length&&this.$store.state.categories.apiUrl+this.$store.state.categories.activeItem.ident},componentName:function(){return this.$store.state.categories.component}},components:{fetchResult:G,info:F,preloader:X}},tt=Z,et=(n("3595"),Object(v["a"])(tt,U,R,!1,null,null,null)),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v(t._s(t.h1))]),n("h2",[t._v(t._s(t.categoryName))]),n(t.componentName,{tag:"component"})],1)},it=[],st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"productList"},[t.isEmptyList?n("p",{staticClass:"emptyProductListInfo"},[t._v("Товары отсутствуют")]):t._e(),t._l(t.productList,(function(e){return n("div",{key:e.id,staticClass:"productItem"},[n("div",{staticClass:"product__image-block"},[n("img",{attrs:{src:e.image_preview,alt:e.title}})]),n("div",{staticClass:"product__name"},[t._v(t._s(e.title))]),n("div",{staticClass:"product__price"},[t._v("Цена: "),n("span",{staticClass:"product__price_red"},[t._v(t._s(e.price))]),t._v(" руб")]),n("div",{staticClass:"product__toCart",on:{click:function(n){return t.addToCart(e.id)}}},[t._v("В корзину")])])}))],2)},rt=[],ct={computed:{isEmptyList:function(){return!this.$store.state.products.products.length},productList:function(){return this.$store.state.products.products}},methods:{addToCart:function(t){this.$store.dispatch("addToCart",{id:t})}}},ot=ct,ut=(n("bdbd"),Object(v["a"])(ot,st,rt,!1,null,null,null)),lt=ut.exports,dt={data:function(){return{h1:"Список товаров"}},computed:{categoryName:function(){return this.$store.state.categories.activeItem.name},componentName:function(){return"preloader"===this.$store.state.categories.component?"preloader":"productList"}},components:{productList:lt,preloader:X}},pt=dt,ft=(n("8f48"),Object(v["a"])(pt,at,it,!1,null,null,null)),vt=ft.exports,mt={name:"MainLayout",data:function(){return{items:[],isOpen:!0}},computed:{viewName:function(){var t=this.$store.state.views.views.find((function(t){return t.active}));return"undefined"!==typeof t?t.name:"preloader"}},components:{TopMenu:_,Sidebar:I,SidebarToggle:N,apiData:nt,apiProducts:vt,preloader:X},mounted:function(){var t=this,e=function(){window.innerWidth<=700?t.isOpen=!1:t.isOpen=!0};e(),window.onresize=function(){e()}}},_t=mt,ht=(n("f6a7"),Object(v["a"])(_t,o,u,!1,null,null,null)),Ct=ht.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mainLayout"},[n("div",{staticClass:"header-place"}),n("header",{staticClass:"header"},[n("p",[t._v(t._s(t._f("date")(t.date,"datetime")))]),n("TopMenu")],1),n("div",{staticClass:"pageContent"},[n("div",{staticClass:"content"},[n(t.viewName,{tag:"component"})],1)]),t._m(0)])},bt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer"},[n("span",{staticClass:"copyrite"},[t._v("© Тестовое задание - часть 2")])])}],yt=(n("0d03"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cart"},[n("h1",[t._v("Корзина")]),n(t.cartComponent,{tag:"component"})],1)}),Ot=[],Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cartProducts"},t._l(t.cartProducts,(function(e){return n("div",{key:e.id,staticClass:"cartProduct"},[n("div",{staticClass:"cartProduct__name"},[t._v(" "+t._s(e.product.title)+" ")]),n("div",{staticClass:"cartProduct__info"},[n("div",{staticClass:"cartProduct__infoItem"},[n("p",{staticClass:"cartProduct__infoItemName"},[t._v("Количество:")]),n("p",{staticClass:"cartProduct__infoItemValue"},[n("span",{staticClass:"val"},[t._v(t._s(e.amount))]),t._v(" шт. ")])]),n("div",{staticClass:"cartProduct__infoItem"},[n("p",{staticClass:"cartProduct__infoItemName"},[t._v("Цена:")]),n("p",{staticClass:"cartProduct__infoItemValue"},[n("span",{staticClass:"val"},[t._v(t._s(e.price))]),t._v(" руб. ")])]),n("div",{staticClass:"cartProduct__infoItem"},[n("p",{staticClass:"cartProduct__infoItemName"},[t._v("Итого:")]),n("p",{staticClass:"cartProduct__infoItemValue"},[n("span",{staticClass:"val"},[t._v(t._s(e.total))]),t._v(" руб. ")])])])])})),0)},wt=[],Tt={computed:{cartProducts:function(){return this.$store.state.cart.products}}},$t=Tt,jt=(n("c198"),Object(v["a"])($t,Et,wt,!1,null,null,null)),It=jt.exports,Pt={computed:{cartComponent:function(){return this.$store.state.cart.component}},mounted:function(){this.$store.dispatch("getCartProducts")},components:{productList:It,preloader:X}},xt=Pt,St=Object(v["a"])(xt,yt,Ot,!1,null,null,null),Lt=St.exports,Mt={name:"CartLayout",data:function(){return{date:new Date,dateInterval:null}},computed:{viewName:function(){var t=this.$store.state.views.views.find((function(t){return t.active}));return"undefined"!==typeof t?t.name:"preloader"}},components:{TopMenu:_,apiCart:Lt,preloader:X},mounted:function(){var t=this;this.dateInterval=setInterval((function(){t.date=new Date}),1e3)},beforeDestroy:function(){clearInterval(this.dateInterval)}},Nt=Mt,Ut=Object(v["a"])(Nt,gt,bt,!1,null,null,null),Rt=Ut.exports,kt={computed:{layout:function(){return this.$store.state.topMenu.layout}},components:{MainLayout:Ct,CartLayout:Rt}},At=kt,Vt=Object(v["a"])(At,r,c,!1,null,null,null),qt=Vt.exports,Dt=n("2f62"),Gt=n("2fa7"),Wt="SET_ACTIVE",Jt="SET_VIEW",Yt="SET_CATEGORY_ACTIVE",zt="SET_CATEGORY_COMPONENT",Ft="SET_PRODUCTS",Bt="SET_CART_PRODUCTS",Ht="SET_CART_COMPONENT",Kt={state:{views:[{id:1,name:"apiData",active:!1},{id:2,name:"apiProducts",active:!1},{id:3,name:"apiCart",active:!1}]},mutations:Object(Gt["a"])({},Jt,(function(t,e){t.views.forEach((function(t){t.active=t.id===e}))})),actions:{setView:function(t,e){var n=t.commit,a=e.viewId;n("SET_VIEW",a)}}},Qt={state:{items:[{id:1,name:"Вывод данных",active:!0,viewId:1,layout:"MainLayout"},{id:2,name:"Вывод товаров",active:!1,viewId:2,layout:"MainLayout"},{id:3,name:"Корзина",active:!1,viewId:3,layout:"CartLayout"}],layout:"MainLayout"},mutations:Object(Gt["a"])({},Wt,(function(t,e){t.items.forEach((function(n){e.id===n.id?(t.layout=n.layout,n.active=!0):n.active=!1}))})),actions:{topMenuClick:function(t,e){var n=t.commit,a=e.item;n("SET_ACTIVE",a),n("SET_VIEW",a.viewId)}}},Xt=(n("d3b7"),{state:{apiUrl:"http://vue-tests.dev.creonit.ru/api/catalog/",items:[{ident:"shiny",name:"Шины",active:!1},{ident:"diski",name:"Диски",active:!1}],activeItem:{ident:"",name:"",active:!1},fetchResult:"",needUpdate:!1,component:"info"},mutations:(a={},Object(Gt["a"])(a,Yt,(function(t,e){var n=this;if(t.activeItem.ident===e)return t.needUpdate=!1,!1;t.items.forEach((function(a){e===a.ident?(a.active=!0,t.needUpdate=!0,n.commit(zt,"preloader"),t.activeItem=a):a.active=!1}))})),Object(Gt["a"])(a,zt,(function(t,e){t.component=e})),a),actions:{setCategory:function(t,e){var n=t.state,a=t.commit,i=e.ident;if(a(Yt,i),n.needUpdate){var s=n.apiUrl+i,r=function(){return{method:"GET",headers:{Accept:"application/json"}}},c=fetch(s,r());c.then((function(t){t.json().then((function(e){a(zt,"fetchResult"),n.fetchResult=e,200===t.status&&a(Ft,e.items)}))}))}}}}),Zt=n("284c"),te={state:{apiUrl:"http://vue-tests.dev.creonit.ru/api/cart/product/",products:[]},mutations:Object(Gt["a"])({},Ft,(function(t,e){t.products=Object(Zt["a"])(e)})),actions:{addToCart:function(t,e){var n=t.state,a=e.id,i=n.apiUrl+a,s=function(){return{method:"POST",headers:{Accept:"application/json"}}},r=fetch(i,s());r.then((function(t){t.json().then((function(e){200===t.status?alert("Товар добавлен"):"string"===typeof e.error.message?alert(e.error.message):alert("error")}))}))}}},ee={state:{apiUrl:"http://vue-tests.dev.creonit.ru/api/cart/list",products:[],component:"preloader"},mutations:(i={},Object(Gt["a"])(i,Bt,(function(t,e){t.products=e})),Object(Gt["a"])(i,Ht,(function(t,e){t.component=e})),i),actions:{getCartProducts:function(t){var e=t.state,n=t.commit;n(Ht,"preloader");var a=function(){return{method:"GET",headers:{Accept:"application/json"}}},i=fetch(e.apiUrl,a());i.then((function(t){t.json().then((function(e){200===t.status?(n(Ht,"productList"),n(Bt,e.list)):"string"===typeof e.error.message&&alert(e.error.message)}))}))}}};s["a"].use(Dt["a"]);var ne=new Dt["a"].Store({state:{},mutations:{},actions:{},modules:{views:Kt,topMenu:Qt,categories:Xt,products:te,cart:ee}});n("caad"),n("2532");function ae(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",n={};return e.includes("date")&&(n.day="2-digit",n.month="long",n.year="numeric"),e.includes("time")&&(n.hour="2-digit",n.minute="2-digit",n.second="2-digit"),new Intl.DateTimeFormat("ru-Ru",n).format(t)}s["a"].config.productionTip=!1,s["a"].filter("date",ae),new s["a"]({store:ne,render:function(t){return t(qt)}}).$mount("#app")},"5b51":function(t,e,n){},"62de":function(t,e,n){"use strict";var a=n("1208"),i=n.n(a);i.a},7439:function(t,e,n){},"884c":function(t,e,n){"use strict";var a=n("d58b"),i=n.n(a);i.a},"8ab6":function(t,e,n){"use strict";var a=n("9e3f"),i=n.n(a);i.a},"8f48":function(t,e,n){"use strict";var a=n("5b51"),i=n.n(a);i.a},"9e3f":function(t,e,n){},a164:function(t,e,n){"use strict";var a=n("d1c6"),i=n.n(a);i.a},a282:function(t,e,n){},ac97:function(t,e,n){"use strict";var a=n("e35f"),i=n.n(a);i.a},bdbd:function(t,e,n){"use strict";var a=n("7439"),i=n.n(a);i.a},c198:function(t,e,n){"use strict";var a=n("cf77"),i=n.n(a);i.a},cf77:function(t,e,n){},d1c6:function(t,e,n){},d58b:function(t,e,n){},db88:function(t,e,n){},e35f:function(t,e,n){},f6a7:function(t,e,n){"use strict";var a=n("db88"),i=n.n(a);i.a}});
//# sourceMappingURL=app.b0344184.js.map